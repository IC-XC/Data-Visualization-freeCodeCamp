<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FCC - Data Visualization - JSON APIs and AJAX</title>

    <link rel="stylesheet" type="text/css" href="stylesheet.css">
    
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/json5/2.2.3/index.min.js"></script>
   
</head>

<body>
    <script>
        document.addEventListener('DOMContentLoaded', function(){
            document.getElementById('sendMessage').onclick = function(){
                const userName = document.getElementById('name').name;
                const url = 'https://jsonplaceholder.typicode.com/posts';
      // Add your code below this line
        const xhr = new XMLHttpRequest();
        xhr.open('POST', url, true);
        xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 201){
                const serverResponse = JSON.parse(xhr.response);
                document.getElementsByClassName('message')[0].textContent = serverResponse.userName + serverResponse.suffix;
            }
        };
        const body = JSON.stringify({ userName: userName, suffix: ' loves cats!' });
        xhr.send(body);

      // Add your code above this line
                };
        });
    </script>

    <h1>Cat Friends</h1>
    <p class="message box">
        Reply from Server will be here
    </p>
        <label for="name">Your name:
        <input type="text" id="name"/>
      </label>
    <p>
        <button id="getMessage">
            Send Message
        </button>
    </p>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.1.1/d3.min.js"></script>
    <script src="script.js"></script>  
</body>

</html>